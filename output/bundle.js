!function(t){var e={};function i(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(r,o,function(e){return t[e]}.bind(null,o));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){"use strict";i.r(e);i(2);var r=i(3),o=i(4),n=i(5),s=i(6),a=i(7),h=i.n(a),l=i(8),d=i.n(l);const u=document.querySelector(".c"),c=new s.default(u);u.style["touch-action"]="none",console.log(u),u.width=window.innerWidth,u.height=window.innerHeight,document.body.style="padding: 0; margin: 0; overflow: hidden";let f=new n.default;f.translate([0,0,-4]),f=f.rotateY(1.8);const m=u.getContext("webgl",{preserveDrawingBuffer:!0}),_=new o.default(m,d.a,h.a,{attribs:["aPosition"],uniforms:["uCamera"]});m.enable(m.DEPTH_TEST);const p=[];for(let t=0;t<100;t++)p.push([Math.floor(5*(2*Math.random()-1)),Math.floor(2*(2*Math.random()-1)),Math.floor(5*(2*Math.random()-1))]);const g=new r.default(m,p);m.clearColor(1,1,1,1),m.clear(m.COLOR_BUFFER_BIT),_.bind(),_.uploadMat4(f.m,"uCamera"),g.getBuffer().bind(),g.getBuffer().point(_,"aPosition",3,m.FLOAT);let b=0;!function t(){c.buttonHandler();f=new n.default;const e=new n.default;e.perspective(45,window.innerWidth/window.innerHeight,.001,100);b+=.02;f=f.translate(c.getPos());f=f.rotateY(c.getRot()[1]);f=e.multiply(f);m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT);_.bind();_.uploadMat4(f.m,"uCamera");g.getBuffer().bind();g.getBuffer().point(_,"aPosition",3,m.FLOAT);m.drawArrays(m.TRIANGLES,0,g._vertices.length/3);requestAnimationFrame(t)}()},function(t,e,i){"use strict";i.r(e);const r=34962,o=35044;e.default=class{constructor(t,e){this._gl=t,this.id=t.createBuffer(),this.buffer(e)}bind(){this._gl.bindBuffer(r,this.id)}buffer(t){this.bind(),this._gl.bufferData(r,t,o)}point(t,e,i,r){this.bind();const o=t.attribs[e];this._gl.enableVertexAttribArray(o),this._gl.vertexAttribPointer(o,i,r,!1,0,0)}}},function(t,e,i){"use strict";i.r(e);var r=i(2);e.default=class{constructor(t,e){this._gl=t,this._buffer=new r.default(t,[]),this.setupBuffer(e)}setupBuffer(t){this._vertices=[];for(let e=0;e<t.length;e++)this._vertices.push(t[e][0]-.5,t[e][1]-.5,t[e][2]-.5,.5+t[e][0],.5+t[e][1],t[e][2]-.5,.5+t[e][0],t[e][1]-.5,t[e][2]-.5,t[e][0]-.5,t[e][1]-.5,t[e][2]-.5,t[e][0]-.5,.5+t[e][1],t[e][2]-.5,.5+t[e][0],.5+t[e][1],t[e][2]-.5,t[e][0]-.5,t[e][1]-.5,t[e][2]+.5,.5+t[e][0],.5+t[e][1],t[e][2]+.5,.5+t[e][0],t[e][1]-.5,t[e][2]+.5,t[e][0]-.5,t[e][1]-.5,t[e][2]+.5,t[e][0]-.5,.5+t[e][1],t[e][2]+.5,.5+t[e][0],.5+t[e][1],t[e][2]+.5,t[e][0]+.5,t[e][1]-.5,t[e][2]-.5,.5+t[e][0],.5+t[e][1],t[e][2]+.5,.5+t[e][0],t[e][1]-.5,t[e][2]+.5,t[e][0]+.5,t[e][1]+.5,t[e][2]-.5,.5+t[e][0],.5+t[e][1],t[e][2]+.5,.5+t[e][0],t[e][1]-.5,t[e][2]-.5,t[e][0]-.5,t[e][1]-.5,t[e][2]-.5,t[e][0]-.5,.5+t[e][1],t[e][2]+.5,t[e][0]-.5,t[e][1]-.5,t[e][2]+.5,t[e][0]-.5,t[e][1]+.5,t[e][2]-.5,t[e][0]-.5,.5+t[e][1],t[e][2]+.5,t[e][0]-.5,t[e][1]-.5,t[e][2]-.5,t[e][0]-.5,t[e][1]+.5,t[e][2]+.5,t[e][0]+.5,t[e][1]+.5,t[e][2]+.5,t[e][0]-.5,t[e][1]+.5,t[e][2]-.5,t[e][0]+.5,t[e][1]+.5,t[e][2]-.5,t[e][0]+.5,t[e][1]+.5,t[e][2]+.5,t[e][0]-.5,t[e][1]+.5,t[e][2]-.5,t[e][0]-.5,t[e][1]-.5,t[e][2]+.5,t[e][0]+.5,t[e][1]-.5,t[e][2]+.5,t[e][0]-.5,t[e][1]-.5,t[e][2]-.5,t[e][0]+.5,t[e][1]-.5,t[e][2]-.5,t[e][0]+.5,t[e][1]-.5,t[e][2]+.5,t[e][0]-.5,t[e][1]-.5,t[e][2]-.5);this._buffer.buffer(new Float32Array(this._vertices))}getBuffer(){return this._buffer}}},function(t,e,i){"use strict";i.r(e);e.default=class{constructor(t,e,i,r){if(this._gl=t,this.rawAttribs=r.attribs,this.rawUniforms=r.uniforms,this.program=t.createProgram(),this.vs=t.createShader(t.VERTEX_SHADER),this.fs=t.createShader(t.FRAGMENT_SHADER),this.compileShader(this._gl,this.vs,i),this.compileShader(this._gl,this.fs,e),t.attachShader(this.program,this.vs),t.attachShader(this.program,this.fs),t.linkProgram(this.program),!t.getProgramParameter(this.program,t.LINK_STATUS))throw r=t.getProgramInfoLog(this.program),new Error("Could not compile WebGL this.program. \n\n"+r);this.grabParameters()}bind(){this._gl.useProgram(this.program)}uploadInt(t,e){this.gl.uniform1i(this.uniforms[e],t)}uploadFloat(t,e){this._gl.uniform1f(this.uniforms[e],t)}uploadVec2(t,e){this._gl.uniform2fv(this.uniforms[e],t)}uploadVec3(t,e){this._gl.uniform3fv(this.uniforms[e],t)}uploadVec4(t,e){this._gl.uniform4fv(this.uniforms[e],t)}uploadMat4(t,e){this._gl.uniformMatrix4fv(this.uniforms[e],!1,t)}grabParameters(){this.uniforms=[];for(let t=0;t<this.rawUniforms.length;t++)this.uniforms[this.rawUniforms[t]]=this._gl.getUniformLocation(this.program,this.rawUniforms[t]);this.attribs=[];for(let t=0;t<this.rawAttribs.length;t++)this.attribs[this.rawAttribs[t]]=this._gl.getAttribLocation(this.program,this.rawAttribs[t])}compileShader(t,e,i){return t.shaderSource(e,i),t.compileShader(e),!!t.getShaderParameter(e,t.COMPILE_STATUS)||(alert(t.getShaderInfoLog(e)),null)}}},function(t,e,i){"use strict";i.r(e);class r{constructor(){this.m=[],this.identity()}identity(){for(let t=0;t<16;t++)this.m.push(0);for(let t=0;t<16;t+=5)this.m[t]=1}perspective(t,e,i,r){let o=t*Math.PI/180,n=i*Math.tan(o/2),s=n*e;this.m[0]=2*i/(s- -s),this.m[5]=2*i/(n- -n),this.m[8]=(s+-s)/(s- -s),this.m[9]=(n+-n)/(n- -n),this.m[10]=-(r+i)/(r-i),this.m[11]=-1,this.m[14]=-2*r*i/(r-i)}multiply(t){let e=new r;for(let i=0;i<16;i++)e.m[i]=this.m[i%4]*t.m[4*Math.floor((1|i)/4)]+this.m[i%4+4]*t.m[4*Math.floor((1|i)/4)+1]+this.m[i%4+8]*t.m[4*Math.floor((1|i)/4)+2]+this.m[i%4+12]*t.m[4*Math.floor((1|i)/4)+3];return e}translate(t){let e=new r;for(let i=0;i<3;i++)e.m[i+12]=t[i];return e.multiply(this)}rotateY(t){let e=new r;return e.m[0]=Math.cos(t),e.m[2]=Math.sin(t),e.m[5]=1,e.m[8]=-Math.sin(t),e.m[10]=Math.cos(t),e.m[15]=1,e.multiply(this)}rotateX(t){let e=new r;return e.m[0]=1,e.m[5]=Math.cos(t),e.m[6]=-Math.sin(t),e.m[9]=Math.sin(t),e.m[10]=Math.cos(t),e.m[15]=1,e.multiply(this)}}e.default=r},function(t,e,i){"use strict";i.r(e);e.default=class{constructor(t){this._pos=[0,0,0],this._rot=[0,0,0],this._setupEventListeners(t),this._canvas=t,this._locked=!1,this._lastX=0,this._sensitivity=2,this._down=[],this._up=[],this._mobileMove=[0,0,0],this._lastX=0;for(let t=0;t<255;t++)this._down.push(!1),this._up.push(!0)}_dpadHandler(t){let e=t.clientX/this._controlHeight,i=(t.clientY-this._controlHeight)/this._controlHeight;e-=.5,i-=.5,this._mobileMove[0]=.08*-e,this._mobileMove[2]=.08*i,this._lastPointer=t}_pointerDownAndUpHandler(t){this._lastX=t.clientX}_pointerHandler(t){this._rot[1]+=(t.clientX-this._lastX)/window.innerWidth*4,this._lastX=t.clientX}_lockHandler(){this._locked||this._canvas.requestPointerLock()}_clickHandler(){this._lockHandler()}_pointerLockHandler(t){this._locked=!this._locked}_mouseHandler(t){this._rot[1]+=-t.movementX/window.innerWidth*this._sensitivity}_keyBoardHandler(t){"keydown"===t.type?(this._up[t.keyCode]=!1,this._down[t.keyCode]=!0):(this._up[t.keyCode]=!0,this._down[t.keyCode]=!1)}mobileMoveHandler(){for(let t=0;t<this._pointers.length;t++);}buttonHandler(){this._pos[0]+=this._mobileMove[0]*Math.cos(this._rot[1])-this._mobileMove[2]*Math.sin(this._rot[1]),this._pos[1]+=this._mobileMove[1],this._pos[2]+=-this._mobileMove[0]*Math.sin(this._rot[1])-this._mobileMove[2]*Math.cos(this._rot[1]);const t=[0,0,0];for(let e=0;e<this._down.length;e++)switch(this._down[e]?0:e){case 65:t[0]-=.05;break;case 87:t[2]+=.05;break;case 83:t[2]-=.05;break;case 68:t[0]+=.05}this._pos[0]+=t[0]*Math.cos(this._rot[1])-t[2]*Math.sin(this._rot[1]),this._pos[1]+=t[1],this._pos[2]+=-t[0]*Math.sin(this._rot[1])-t[2]*Math.cos(this._rot[1])}_pointerUpHandler(t){t.pointerId===this._lastPointer.pointerId&&(this._mobileMove[0]=0,this._mobileMove[2]=0)}_setupEventListeners(t){if(void 0===window.orientation)document.addEventListener("pointerlockchange",this._pointerLockHandler.bind(this)),t.addEventListener("click",this._clickHandler.bind(this)),t.addEventListener("mousemove",this._mouseHandler.bind(this)),document.addEventListener("keydown",this._keyBoardHandler.bind(this)),document.addEventListener("keyup",this._keyBoardHandler.bind(this));else{t.addEventListener("pointermove",this._pointerHandler.bind(this)),t.addEventListener("pointerup",this._pointerDownAndUpHandler.bind(this)),t.addEventListener("pointerdown",this._pointerDownAndUpHandler.bind(this));const e=document.querySelector(".control");e.addEventListener("pointerup",this._pointerUpHandler.bind(this)),e.addEventListener("pointermove",this._dpadHandler.bind(this)),this._mobileControls=document.querySelector(".control"),this._mobileControls.style.position="absolute",this._mobileControls.style.backgroundColor="orange",this._topOffset=window.innerHeight/2,this._controlHeight=window.innerHeight/2,this._mobileControls.style.top=this._topOffset+"px",this._mobileControls.style.width=window.innerHeight/2+"px",this._mobileControls.style.height=window.innerHeight/2+"px"}}getRot(){return this._rot}getPos(){return this._pos}}},function(t,e){t.exports="precision highp float;\r\n\r\nattribute vec3 aPosition;\r\nvarying vec3 inputPos;\r\n\r\nuniform mat4 uCamera;\r\nvoid main() {\r\n  inputPos = aPosition;\r\n  gl_Position = uCamera * vec4(aPosition, 1);\r\n}\r\n"},function(t,e){t.exports="precision highp float;\r\n\r\nvarying vec3 inputPos;\r\n\r\nvoid main() {\r\n  gl_FragColor = vec4(inputPos, 1.);\r\n}\r\n"}]);